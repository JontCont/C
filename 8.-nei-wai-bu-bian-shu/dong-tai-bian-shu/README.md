# 動/靜態變數、暫存器變數

## 動態變數

## 靜態變數

## 暫存器變數

指示變數需存放在機器的暫存器中，適用於特別需要高速存取的變數

* 以關鍵字**register**修飾的變數
* 編譯器通常會對暫存器的使用做最佳化，編譯器有權不理會這個修飾詞，所以通常不需指定。有些編譯器沒有操作暫存器的權限，或受限於電腦暫存器的數量
* 暫存器沒有位址，所以不能使用&運算子來取得變數的位址， 只有區域變數和函式的引數才可宣告為暫存器變數

```c
register int num = 0 ;
void function(register int num)
{     
}
```

## Volatile變數 <a id="firstHeading"></a>

volatile是容易變化的意思，表示其值的有效性非常短暫，可能被別的程式或其它因素而遭到修改

**volatile變數不會被最佳化**，或存到暫存器編譯器無法將volatile變數最佳化，降低程式效率volatile變數存在記憶體中，對於經常要存取的值，系統會將其放到暫存器中。  
  
因為多執行緒程式或外部程式隨時有可能修改記憶體中volatile的值，所以不能將其放到暫存器中，避免讀取到錯誤的資料

* 範例：最佳化前，一般程式中若對同一個變數做多次指派，則只有最後一次是有意義的

  ```text
  num = 3;
  num = 0;
  num = 5;
  ```

  最佳化後：

  ```text
  num = 5;
  ```

在嵌入式系統中較常用volatile修飾詞

* 在嵌入式系統中，有些變數可以對應到IC的腳位
* 範例：例如指派PortA=4可以使Led亮一次，假設想讓Led亮三次 寫法為：

  ```text
  PortA=4;
  PortA=4;
  PortA=4;
  ```

* 如果沒將PortA宣告為volatile，則編譯器可能會將程式最佳化為PortA=4; ⇒ Led只亮一次

